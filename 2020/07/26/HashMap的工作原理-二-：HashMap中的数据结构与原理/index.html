<!DOCTYPE html>
<html lang="cn">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="liuchanglin">





<title>HashMapçš„å·¥ä½œåŸç†(äºŒ)ï¼šHashMapä¸­çš„æ•°æ®ç»“æ„ä¸åŸç† | liuchanglin &#39;s blog</title>



    <link rel="icon" href="/img.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">LiuChanglin&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">LiuChanglin&#39;s Blog</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">HashMapçš„å·¥ä½œåŸç†(äºŒ)ï¼šHashMapä¸­çš„æ•°æ®ç»“æ„ä¸åŸç†</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">liuchanglin</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">July 26, 2020&nbsp;&nbsp;13:30:35</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <h3 id="1ã€å“ˆå¸Œè¡¨æ¦‚è¿°"><a href="#1ã€å“ˆå¸Œè¡¨æ¦‚è¿°" class="headerlink" title="1ã€å“ˆå¸Œè¡¨æ¦‚è¿°"></a>1ã€å“ˆå¸Œè¡¨æ¦‚è¿°</h3><p>â€‹    åœ¨äº†è§£ä»€ä¹ˆæ˜¯HashMapä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦äº†è§£å“ˆå¸Œè¡¨ï¼ˆHash tableï¼‰ï¼š</p>
<blockquote>
<p>å“ˆå¸Œè¡¨ï¼ˆhash tableï¼‰<br>ä¹Ÿå«æ•£åˆ—è¡¨ï¼Œæ˜¯ä¸€ç§éå¸¸é‡è¦çš„æ•°æ®ç»“æ„ï¼Œåº”ç”¨åœºæ™¯åŠå…¶ä¸°å¯Œï¼Œè®¸å¤šç¼“å­˜æŠ€æœ¯ï¼ˆæ¯”å¦‚memcachedï¼‰çš„æ ¸å¿ƒå…¶å®å°±æ˜¯åœ¨å†…å­˜</p>
<p>å¼ å¤§çš„å“ˆå¸Œè¡¨. </p>
</blockquote>
<p>â€‹    é¦–å…ˆï¼Œä¸å“ˆå¸Œè¡¨è¿›è¡ŒåŒºåˆ«ï¼Œæˆ‘ä»¬è¦äº†è§£ä¸€ä¸‹å…¶ä»–æ•°æ®ç»“æ„åœ¨æ–°å¢ã€æŸ¥æ‰¾ç­‰åŸºç¡€æ“ä½œçš„æ‰§è¡Œæ€§èƒ½. </p>
<p><strong>æ•°ç»„ï¼š</strong></p>
<p>â€‹    æ•°ç»„é‡‡ç”¨ä¸€æ®µè¿ç»­çš„å­˜å‚¨å•å…ƒæ¥è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œå¯¹äºæŒ‡å®šä¸‹æ ‡çš„æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼›é€šè¿‡ç»™å®šå€¼çš„æŸ¥æ‰¾ï¼Œéœ€è¦éå†æ•°ç»„ï¼Œé€ä¸€æ¯”å¯¹ç»™å®šå…³é”®å­—å’Œæ•°ç»„å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œå¯¹äºæœ‰åºæ•°ç»„å½“ç„¶å¯ä»¥é‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾ã€å·®å€¼æŸ¥æ‰¾ï¼Œæ–æ³¢é‚£å¥‘æŸ¥æ‰¾ç­‰æ–¹å¼ï¼Œå¯ä»¥è®²æŸ¥æ‰¾å¤æ‚åº¦æé«˜åˆ°O(logn)ï¼›å¯¹äºä¸€èˆ¬çš„æ’å…¥ã€åˆ é™¤æ“ä½œï¼Œæ¶‰åŠåˆ°æ•°ç»„å…ƒç´ çš„ç§»åŠ¨ï¼Œå¹³å‡å¤æ‚åº¦ä¸ºO(n)ã€‚</p>
<p>â€‹    æ•°ç»„åœ¨å†…å­˜ä¸­æŸ¥æ‰¾ä½ç½®æ»¡è¶³å…¬å¼ï¼š</p>
<blockquote>
<p>a[i]_address = base_address + i*data_type_size</p>
</blockquote>
<p>â€‹    è¿™é‡Œçš„base_addressä»£è¡¨æ•°ç»„å¤´èŠ‚ç‚¹å†…å­˜åœ°å€ï¼Œiè¡¨ç¤ºä¸ºä¸‹æ ‡ï¼Œdata_type_sizeè¡¨ç¤ºæ¯ä¸ªèŠ‚ç‚¹çš„å¤§å°ï¼Œæ‰€ä»¥é€šè¿‡è¿™ä¸ªå…¬å¼è®¡ç®—ï¼Œå¯ä»¥å¿«é€Ÿå®šä½åˆ°æŒ‡å®šä¸‹æ ‡çš„å…ƒç´ ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ•°ç»„ä¸‹æ ‡ç¬¬ä¸€ä¸ªæ˜¯0çš„åŸå› äº†ï¼ˆå‡å°‘ä¸€æ¬¡å‡æ³•è¿ç®—ï¼Œæé«˜æ•ˆç‡ï¼‰ã€‚</p>
<p><strong>çº¿æ€§é“¾è¡¨ï¼š</strong></p>
<p>â€‹    å¯¹äºé“¾è¡¨çš„æ–°å¢ã€åˆ é™¤ç­‰æ“ä½œï¼Œåªéœ€è¦å¤„ç†èŠ‚ç‚¹ä¹‹é—´çš„å¼•ç”¨å³å¯ï¼Œè¿™æ ·çš„è¯æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(1)ï¼Œè€ŒæŸ¥æ‰¾æ“ä½œéœ€è¦éå†é“¾è¡¨æ³¨æ„è¿›è¡Œæ¯”å¯¹ï¼Œå¤æ‚åº¦ä¸ºO(n)ã€‚</p>
<p><strong>äºŒå‰æ ‘ï¼š</strong></p>
<p>â€‹    å¯¹äºä¸€é¢—ç›¸å¯¹å¹³è¡¡çš„æœ‰åºäºŒå‰æ ‘ï¼Œå¯¹å…¶è¿›è¡Œæ’å…¥ï¼ŒæŸ¥æ‰¾ï¼Œåˆ é™¤ç­‰æ“ä½œï¼Œå¹³å‡å¤æ‚åº¦å‡ä¸ºO(logn)ã€‚</p>
<p><strong>å“ˆå¸Œè¡¨ï¼š</strong></p>
<p>â€‹    ç›¸æ¯”äºä»¥ä¸Šæ•°æ®ç»“æ„ï¼Œåœ¨å“ˆå¸Œè¡¨ä¸­è¿›è¡Œæ·»åŠ ã€åˆ é™¤ã€æŸ¥æ‰¾ç­‰æ“ä½œï¼Œæ€§èƒ½ååˆ†é«˜ï¼Œåœ¨ä¸è€ƒè™‘å“ˆå¸Œå†²çªçš„æƒ…å†µä¸‹ã€‚ä»…éœ€è¦ä¸€æ¬¡å®šä½å³å¯å®Œæˆï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1). </p>
<p>â€‹    å“ˆå¸Œè¡¨çš„ä¸»ä½“æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¸€èˆ¬è¢«ç§°ä¸ºbucketæ•°ç»„ï¼Œåœ¨è¿™ä¸ªbucketä¸­å­˜æ”¾ç€æˆ‘ä»¬éœ€è¦ä¿å­˜çš„æ•°æ®å…ƒç´ ï¼Œåœ¨æˆ‘ä»¬è¿›è¡Œä¿å­˜çš„æ—¶å€™ï¼Œé€šè¿‡å¯¹æ•°æ®hashå€¼ä¸bucketæ•°ç»„é•¿åº¦ä¹‹é—´è¿›è¡Œè¿ç®—ï¼Œå¯ä»¥å¾—åˆ°å½“å‰å…ƒç´ è¦å­˜å‚¨çš„ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´é€šè¿‡æŸç§å‡½æ•°æ˜ å°„ï¼Œå°†å…ƒç´ æ˜ å°„åˆ°bucketä¸­çš„ç‰¹å®šä½ç½®ä¸Šï¼Œæœ‰äº†è¿™ä¸ªä½ç½®æˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œå¿«é€Ÿçš„æ•°æ®æŸ¥æ‰¾å®šä½ã€‚</p>
<h3 id="2ã€HashMapçš„æ•°æ®ç»“æ„"><a href="#2ã€HashMapçš„æ•°æ®ç»“æ„" class="headerlink" title="2ã€HashMapçš„æ•°æ®ç»“æ„"></a>2ã€HashMapçš„æ•°æ®ç»“æ„</h3><h4 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h4><p>â€‹    HashMapæœ€æ—©å‡ºç°åœ¨JDK 1.2ä¸­ï¼Œåº•å±‚åŸºäºæ•£åˆ—ç®—æ³•å®ç°ã€‚HashMapå…è®¸nullé”®å’Œnullå€¼ï¼Œåœ¨è®¡ç®—nullé”®çš„å“ˆå¸Œå€¼æ—¶ï¼Œnullé”®å“ˆå¸Œå€¼ä¸º0ã€‚HashMapå¹¶ä¸ä¿è¯é”®å€¼å¯¹çš„é¡ºåºï¼Œè¿™æ„å‘³ç€åœ¨è¿›è¡ŒæŸäº›æ“ä½œä¹‹åï¼Œé”®å€¼å¯¹çš„é¡ºåºå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚å¦å¤–ï¼ŒHashMapæ˜¯éçº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½å­˜åœ¨é—®é¢˜ã€‚</p>
<p>â€‹    jdk1.8ä¹‹å‰é‡‡ç”¨çš„æ˜¯æ•°ç»„+é“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªEntryç»“ç‚¹ï¼ŒåŒ…å«keyã€valueã€hashå€¼ã€æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ çš„nextæŒ‡é’ˆå››ä¸ªå±æ€§ã€‚jdk1.8ä¹‹åé‡‡ç”¨çš„æ˜¯æ•°ç»„+é“¾è¡¨æˆ–è€…æ˜¯çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªNodeç»“ç‚¹ï¼ŒNodeå®ç°äº†Entryæ¥å£ï¼ŒNodeæœ‰ä¸€ä¸ªå­ç±»TreeNodeï¼Œä»£è¡¨æ ‘ç»“ç‚¹ã€‚</p>
<p><img src="https://magic-picgo.oss-cn-beijing.aliyuncs.com/hexoBlog/image-20200726164635518.png" alt="image-20200726164635518"  /></p>
<h4 id="æ•£åˆ—ç®—æ³•"><a href="#æ•£åˆ—ç®—æ³•" class="headerlink" title="æ•£åˆ—ç®—æ³•"></a>æ•£åˆ—ç®—æ³•</h4><p>åœ¨è¿›è¡Œå¢åˆ æŸ¥ç­‰æ“ä½œæ—¶ï¼Œé¦–å…ˆè¦å®šä½åˆ°å…ƒç´ åœ¨æ•°ç»„ï¼ˆbucketæ•°ç»„ï¼‰ä¸­çš„ä½ç½®ï¼Œè€Œå®šä½è¿™ä¸ªä½ç½®çš„æ–¹æ³•å°±æ˜¯â€œæ•£åˆ—ç®—æ³•â€ï¼Œä¹Ÿå«å“ˆå¸Œå‡½æ•°ã€‚</p>
<p>æ•£åˆ—ç®—æ³•ï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨hashmapä¸­è¦æ‰¾åˆ°æŸä¸ªå…ƒç´ ï¼Œéœ€è¦æ ¹æ®keyçš„hashå€¼æ¥æ±‚å¾—å¯¹åº”æ•°ç»„ä¸­çš„ä½ç½®ã€‚å¦‚ä½•è®¡ç®—è¿™ä¸ªä½ç½®å°±æ˜¯hashç®—æ³•ã€‚å‰é¢è¯´è¿‡hashmapçš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆï¼Œæ‰€ä»¥æˆ‘ä»¬å½“ç„¶å¸Œæœ›è¿™ä¸ªhashmapé‡Œé¢çš„å…ƒç´ ä½ç½®å°½é‡çš„åˆ†å¸ƒå‡åŒ€äº›ï¼Œå°½é‡ä½¿å¾—æ¯ä¸ªä½ç½®ä¸Šçš„å…ƒç´ æ•°é‡åªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬ç”¨hashç®—æ³•æ±‚å¾—è¿™ä¸ªä½ç½®çš„æ—¶å€™ï¼Œé©¬ä¸Šå°±å¯ä»¥çŸ¥é“å¯¹åº”ä½ç½®çš„å…ƒç´ å°±æ˜¯æˆ‘ä»¬è¦çš„ï¼Œè€Œä¸ç”¨å†å»éå†é“¾è¡¨ã€‚</p>
<p>è¿™ä¸ªç®—æ³•åœ¨HashMapçš„å®ç°æ–¹æ³•æ˜¯ç”¨hashcodeå¯¹æ•°ç»„é•¿åº¦è¿›è¡Œå–æ¨¡è¿ç®—ï¼Œä¹Ÿå°±æ˜¯ï¼š</p>
<blockquote>
<p>index = hashcode % lengthï¼ˆä¸¾ä¾‹æ¥è¯´ å®šä½å…ƒç´ 35åœ¨æ¡¶æ•°ç»„ä¸­çš„ä½ç½®ï¼šindex = 35ï¼ˆå–å…¶hashï¼‰% 16ï¼ˆhashMapåˆå§‹åŒ–é•¿åº¦ï¼‰</p>
</blockquote>
<p>å›¾ä¸­çš„æŸ¥è¯¢æ–¹æ³•ç®€å•ä¸¾ä¾‹å°±æ˜¯ index = 35 % 16 = 3 ç„¶åå†åœ¨3å·æ¡¶æ‰€æŒ‡å‘çš„é“¾è¡¨ä¸­ç»§ç»­æŸ¥æ‰¾ï¼Œ35å°±åœ¨é“¾è¡¨ä¸­.</p>
<h4 id="æ•£åˆ—å†²çª"><a href="#æ•£åˆ—å†²çª" class="headerlink" title="æ•£åˆ—å†²çª"></a>æ•£åˆ—å†²çª</h4><p>â€‹    æ•£åˆ—å†²çªä¹Ÿå«å“ˆå¸Œç¢°æ’ã€å“ˆå¸Œå†²çªã€‚æ­£å¦‚ä¸‡äº‹æ— å®Œç¾ï¼Œå¦‚æœä¸¤ä¸ªä¸åŒçš„å…ƒç´ ï¼Œé€šè¿‡æ•£åˆ—ç®—æ³•è®¡ç®—å‡ºçš„å­˜å‚¨åœ°å€ç›¸åŒè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨å¯¹å…ƒç´ è¿›è¡Œæ•£åˆ—ç®—æ³•ç¡®å®šä½ç½®ä¹‹åï¼Œå‘ç°å½“å‰ä½ç½®ä¸Šå·²ç»æœ‰äº†å…ƒç´ è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„æ•£åˆ—å†²çªã€‚</p>
<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>
<ol>
<li><p><strong>å¼€æ”¾å¯»å€æ³•</strong></p>
<p>å¼€æ”¾å¯»å€çš„æ€æƒ³å°±æ˜¯ï¼Œå‡ºç°äº†æ•£åˆ—å†²çªä¹‹åï¼Œæˆ‘ä»¬å°±é‡æ–°æ‰¾åˆ°ä¸€ä¸ªç©ºé—²ä½ç½®å°†å…¶æ’å…¥ï¼Œé‡æ–°æ¢æµ‹ä½ç½®çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼Œ<strong>çº¿æ€§æ¢æµ‹(Linear Probing)</strong>ã€‚</p>
<p><strong>çº¿æ€§æ¢æµ‹ï¼š</strong></p>
<p>â€‹    å½“æˆ‘ä»¬å¾€æ•£åˆ—è¡¨ä¸­æ’å…¥æ•°æ®æ—¶ï¼Œå¦‚æœæŸä¸ªæ•°æ®ç»è¿‡æ•£åˆ—å‡½æ•°æ•£åˆ—ä¹‹åï¼Œå­˜å‚¨ä½ç½®å·²ç»è¢«å ç”¨äº†ï¼Œæˆ‘ä»¬å°±ä»å½“å‰ä½ç½®å¼€å§‹ï¼Œä¾æ¬¡å¾€åæŸ¥æ‰¾ï¼Œçœ‹æ˜¯å¦æœ‰ç©ºé—²ä½ç½®ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ã€‚</p>
<p>â€‹    å¯¹äºçº¿æ€§æ¢æµ‹çš„æŸ¥æ‰¾æœ‰ç‚¹å„¿ç±»ä¼¼æ’å…¥è¿‡ç¨‹ã€‚æˆ‘ä»¬é€šè¿‡æ•£åˆ—å‡½æ•°æ±‚å‡ºè¦æŸ¥æ‰¾å…ƒç´ çš„é”®å€¼å¯¹åº”çš„æ•£åˆ—å€¼ï¼Œç„¶åæ¯”è¾ƒæ•°ç»„ä¸­ä¸‹æ ‡ä¸ºæ•£åˆ—å€¼çš„å…ƒç´ å’Œè¦æŸ¥æ‰¾çš„å…ƒç´ ã€‚å¦‚æœç›¸ç­‰ï¼Œåˆ™è¯´æ˜å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„å…ƒç´ ï¼›å¦åˆ™å°±é¡ºåºå¾€åä¾æ¬¡æŸ¥æ‰¾ã€‚<strong>å¦‚æœéå†åˆ°æ•°ç»„ä¸­çš„ç©ºé—²ä½ç½®ï¼Œè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±è¯´æ˜è¦æŸ¥æ‰¾çš„å…ƒç´ å¹¶æ²¡æœ‰åœ¨æ•£åˆ—è¡¨ä¸­ã€‚</strong></p>
<p>â€‹    ä½†æ˜¯çº¿æ€§æ¢æµ‹çš„ä¸€ä¸ªé‡è¦é—®é¢˜å°±æ˜¯ä»–çš„åˆ é™¤æ“ä½œï¼Œæˆ‘ä»¬åœ¨åˆ é™¤å…ƒç´ çš„æ—¶å€™ä¸èƒ½å•çº¯çš„æŠŠå…ƒç´ è®¾ç½®ä¸ºç©ºï¼Œå› ä¸ºåœ¨æŸ¥æ‰¾çš„æ—¶å€™ï¼Œä¸€æ—¦æˆ‘ä»¬é€šè¿‡çº¿æ€§æ¢æµ‹æ–¹æ³•ï¼Œæ‰¾åˆ°ä¸€ä¸ªç©ºé—²ä½ç½®ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¤å®šæ•£åˆ—è¡¨ä¸­ä¸å­˜åœ¨è¿™ä¸ªæ•°æ®ã€‚ä½†æ˜¯å¦‚æœè¿™ä¸ªä½ç½®å°±æ˜¯æˆ‘ä»¬åˆšåˆšåˆ é™¤çš„ï¼Œé‚£è¿™ä¸ªæŸ¥æ‰¾ç®—æ³•å°±å¤±æ•ˆäº†ï¼ŒåŸæ¥å­˜åœ¨çš„æ•°æ®ä¼šè¢«è®¤å®šä¸ºä¸å­˜åœ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨åˆ é™¤å…ƒç´ æ—¶ï¼Œåº”è¯¥å°†åˆ é™¤çš„å…ƒç´ æ ‡è®°ä¸ºä¸€ä¸ªdeletedçŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¿›è¡ŒæŸ¥æ‰¾ï¼Œå°±å¯ä»¥ç»§ç»­å‘ä¸‹æ¢æµ‹äº†ã€‚</p>
<blockquote>
<p>ç”±æ­¤å¯ä»¥çœ‹åˆ°ï¼Œçº¿æ€§æ¢æµ‹æœ‰å¾ˆå¤§çš„é—®é¢˜ï¼Œå½“æˆ‘ä»¬æ’å…¥çš„æ•°æ®è¶Šæ¥è¶Šå¤šï¼Œç©ºé—²ä½ç½®è¶Šæ¥è¶Šå°‘ï¼Œé‚£è¿™ä¸ªæ—¶å€™å°±ä¼šæ›´å®¹æ˜“äº§ç”Ÿå†²çªï¼Œè€Œç”±æ­¤ä¼šæµªè´¹å¤§é‡çš„æ—¶é—´åœ¨æ¢æµ‹è¿™ä¸ªæ“ä½œä¸Šï¼Œæç«¯æƒ…å†µä¸‹è¿˜å®¹æ˜“æ¢æµ‹æ•´å¼ è¡¨ï¼Œè¿™æ ·çš„æ•ˆç‡æå…¶ä½ä¸‹ã€‚é™¤äº†çº¿æ€§æ¢æµ‹ä¹‹å¤–é‡æ–°æ¢æµ‹çš„æ–¹å¼è¿˜æœ‰ <strong>äºŒæ¬¡æ¢æµ‹(Quadratic probing)</strong>å’Œ <strong>åŒé‡æ•£åˆ—(Double hashing)</strong></p>
</blockquote>
</li>
<li><p><strong>é“¾è¡¨æ³•</strong></p>
<p>â€‹    é“¾è¡¨æ³•æ˜¯ä¸€ç§æ›´åŠ å¸¸ç”¨çš„æ•£åˆ—å†²çªè§£å†³åŠæ³•ï¼Œç›¸æ¯”å¼€æ”¾å¯»å€æ³•ï¼Œå®ƒè¦ç®€å•å¾ˆå¤šã€‚æˆ‘ä»¬æ¥çœ‹è¿™ä¸ªå›¾ï¼Œåœ¨æ•£åˆ—è¡¨ä¸­ï¼Œæ¯ä¸ªâ€œæ¡¶ï¼ˆbucketï¼‰â€æˆ–è€…â€œæ§½ï¼ˆslotï¼‰â€ä¼šå¯¹åº”ä¸€æ¡é“¾è¡¨ï¼Œæ‰€æœ‰æ•£åˆ—å€¼ç›¸åŒçš„å…ƒç´ æˆ‘ä»¬éƒ½æ”¾åˆ°ç›¸åŒæ§½ä½å¯¹åº”çš„é“¾è¡¨ä¸­ã€‚</p>
<p>â€‹    æ’å…¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡æ•£åˆ—å‡½æ•°è®¡ç®—å‡ºå¯¹åº”çš„æ•£åˆ—æ§½ä½ï¼Œå°†å…¶æ’å…¥åˆ°å¯¹åº”é“¾è¡¨ä¸­å³å¯ï¼Œæ‰€ä»¥æ’å…¥çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ã€‚å½“æŸ¥æ‰¾ã€åˆ é™¤ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæˆ‘ä»¬åŒæ ·é€šè¿‡æ•£åˆ—å‡½æ•°è®¡ç®—å‡ºå¯¹åº”çš„æ§½ï¼Œç„¶åéå†é“¾è¡¨æŸ¥æ‰¾æˆ–è€…åˆ é™¤ã€‚</p>
<p>â€‹    <strong>æˆ‘ä»¬åœ¨HashMapä¸­é‡‡ç”¨çš„æ­£æ˜¯é“¾è¡¨æ³•ï¼Œè€Œä¸”åœ¨é“¾è¡¨è¿‡é•¿æ—¶è¿˜ä¼šè½¬åŒ–æˆä¸ºçº¢é»‘æ ‘ï¼Œæ¥ä¿è¯æ•ˆç‡ã€‚</strong></p>
</li>
</ol>
<h3 id="3ã€HashMapä¸­çš„æ•°æ®ç»“æ„å®ç°"><a href="#3ã€HashMapä¸­çš„æ•°æ®ç»“æ„å®ç°" class="headerlink" title="3ã€HashMapä¸­çš„æ•°æ®ç»“æ„å®ç°"></a>3ã€HashMapä¸­çš„æ•°æ®ç»“æ„å®ç°</h3><h4 id="Bucketæ•°ç»„"><a href="#Bucketæ•°ç»„" class="headerlink" title="Bucketæ•°ç»„"></a>Bucketæ•°ç»„</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The table, initialized on first use, and resized as</span></span><br><span class="line"><span class="comment"> * necessary. When allocated, length is always a power of two.</span></span><br><span class="line"><span class="comment"> * (We also tolerate length zero in some operations to allow</span></span><br><span class="line"><span class="comment"> * bootstrapping mechanics that are currently not needed.)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br></pre></td></tr></table></figure>
<p>Bucketæ•°ç»„å°±æ˜¯ä¸€ä¸ªNode<K,V>ç±»å‹çš„æ•°ç»„ï¼Œä½¿ç”¨äº†<code>transient</code>å…³é”®å­—ä¿®é¥°</p>
<blockquote>
<ol>
<li>ä¸€æ—¦å˜é‡è¢«transientä¿®é¥°ï¼Œå˜é‡å°†ä¸å†æ˜¯å¯¹è±¡æŒä¹…åŒ–çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥å˜é‡å†…å®¹åœ¨åºåˆ—åŒ–åæ— æ³•è·å¾—è®¿é—®ã€‚</li>
<li>transientå…³é”®å­—åªèƒ½ä¿®é¥°å˜é‡ï¼Œè€Œä¸èƒ½ä¿®é¥°æ–¹æ³•å’Œç±»ã€‚æ³¨æ„ï¼Œæœ¬åœ°å˜é‡æ˜¯ä¸èƒ½è¢«transientå…³é”®å­—ä¿®é¥°çš„ã€‚å˜é‡å¦‚æœæ˜¯ç”¨æˆ·è‡ªå®šä¹‰ç±»å˜é‡ï¼Œåˆ™è¯¥ç±»éœ€è¦å®ç°Serializableæ¥å£ã€‚</li>
<li>ä¸€ä¸ªé™æ€å˜é‡ä¸ç®¡æ˜¯å¦è¢«transientä¿®é¥°ï¼Œå‡ä¸èƒ½è¢«åºåˆ—åŒ–ã€‚ </li>
</ol>
</blockquote>
<p>åœ¨HashMapæºç ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸å¯ä»¥çœ‹åˆ°transientä¿®é¥°å…¶å›ºæœ‰å±æ€§ï¼Œå¤§æ¦‚æ˜¯ä¸ºäº†åºåˆ—åŒ–çš„å®‰å…¨æ€§ã€‚</p>
<h4 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node<K, V></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Basic hash bin node, used for most entries.  (See below for</span></span><br><span class="line"><span class="comment">     * TreeNode subclass, and in LinkedHashMap for its Entry subclass.)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;K,V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>.Entry&lt;K,V&gt; &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> hash;</span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line">        Node&lt;K,V&gt; next;</span><br><span class="line"></span><br><span class="line">        Node(<span class="type">int</span> hash, K key, V value, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">            <span class="built_in">this</span>.hash = hash;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> K <span class="title function_">getKey</span><span class="params">()</span>        &#123; <span class="keyword">return</span> key; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> V <span class="title function_">getValue</span><span class="params">()</span>      &#123; <span class="keyword">return</span> value; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> String <span class="title function_">toString</span><span class="params">()</span> &#123; <span class="keyword">return</span> key + <span class="string">&quot;=&quot;</span> + value; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Objects.hashCode(key) ^ Objects.hashCode(value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> V <span class="title function_">setValue</span><span class="params">(V newValue)</span> &#123;</span><br><span class="line">            <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> value;</span><br><span class="line">            value = newValue;</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (o == <span class="built_in">this</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Map.Entry) &#123;</span><br><span class="line">                Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</span><br><span class="line">                <span class="keyword">if</span> (Objects.equals(key, e.getKey()) &amp;&amp;</span><br><span class="line">                    Objects.equals(value, e.getValue()))</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>Nodeç±»æ˜¯HashMapçš„ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼Œå®ç°äº†Map.Entry<K, V>æ¥å£ã€‚</p>
<p>ä»ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒNodeçš„å±æ€§æœ‰Kçš„Hashå€¼ï¼Œå…·ä½“çš„Keyã€Valueä»¥åŠæŒ‡å‘ä¸‹ä¸€ä¸ªNodeçš„NextæŒ‡é’ˆã€‚</p>
<p>åŒæ—¶ï¼ŒNodeä¹Ÿå¯¹å…¶çˆ¶æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•è¿›è¡Œäº†å…·ä½“çš„å®ç°. </p>
<h4 id="EntrySet"><a href="#EntrySet" class="headerlink" title="EntrySet"></a>EntrySet</h4><p>é€šå¸¸æˆ‘ä»¬åœ¨éå†ä¸€ä¸ªMapçš„æ—¶å€™ï¼Œé€šå¸¸ç›´æ¥ä½¿ç”¨ä½¿ç”¨å®ƒçš„<code>entrySet()</code>æ–¹æ³•è¿›è¡Œéå†ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;String, String&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//set sth into hashmap ...</span></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; stringStringEntry : hashMap.entrySet()) &#123;</span><br><span class="line">            System.out.println(stringStringEntry.getKey());</span><br><span class="line">            System.out.println(stringStringEntry.getValue());</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨HashMapçš„æºç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°entrySet()æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns a &#123;<span class="doctag">@link</span> Set&#125; view of the mappings contained in this map.</span></span><br><span class="line"><span class="comment"> * The set is backed by the map, so changes to the map are</span></span><br><span class="line"><span class="comment"> * reflected in the set, and vice-versa.  If the map is modified</span></span><br><span class="line"><span class="comment"> * while an iteration over the set is in progress (except through</span></span><br><span class="line"><span class="comment"> * the iterator&#x27;s own &lt;tt&gt;remove&lt;/tt&gt; operation, or through the</span></span><br><span class="line"><span class="comment"> * &lt;tt&gt;setValue&lt;/tt&gt; operation on a map entry returned by the</span></span><br><span class="line"><span class="comment"> * iterator) the results of the iteration are undefined.  The set</span></span><br><span class="line"><span class="comment"> * supports element removal, which removes the corresponding</span></span><br><span class="line"><span class="comment"> * mapping from the map, via the &lt;tt&gt;Iterator.remove&lt;/tt&gt;,</span></span><br><span class="line"><span class="comment"> * &lt;tt&gt;Set.remove&lt;/tt&gt;, &lt;tt&gt;removeAll&lt;/tt&gt;, &lt;tt&gt;retainAll&lt;/tt&gt; and</span></span><br><span class="line"><span class="comment"> * &lt;tt&gt;clear&lt;/tt&gt; operations.  It does not support the</span></span><br><span class="line"><span class="comment"> * &lt;tt&gt;add&lt;/tt&gt; or &lt;tt&gt;addAll&lt;/tt&gt; operations.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a set view of the mappings contained in this map</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() &#123;</span><br><span class="line">    Set&lt;Map.Entry&lt;K,V&gt;&gt; es;</span><br><span class="line">    <span class="keyword">return</span> (es = entrySet) == <span class="literal">null</span> ? (entrySet = <span class="keyword">new</span> <span class="title class_">EntrySet</span>()) : es;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå°±ä¸å¾—ä¸è®©äººå‘è§‰ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨å•çº¯è°ƒç”¨entrySetè¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œåªæ˜¯è¿”å›äº†ä¸€ä¸ªæ–°çš„entrySetï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬ä»ç„¶å¯ä»¥åœ¨entrySetä¸­è®¿é—®åˆ°HashMapçš„keyå’Œvalueå€¼å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬ä»EntrySetçš„æºç è¿›è¡Œåˆ†æï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">EntrySet</span> <span class="keyword">extends</span> <span class="title class_">AbstractSet</span>&lt;Map.Entry&lt;K,V&gt;&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>                 &#123; <span class="keyword">return</span> size; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span>               &#123; HashMap.<span class="built_in">this</span>.clear(); &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> Iterator&lt;Map.Entry&lt;K,V&gt;&gt; iterator() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">EntryIterator</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> Map.Entry))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;) o;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">key</span> <span class="operator">=</span> e.getKey();</span><br><span class="line">        Node&lt;K,V&gt; candidate = getNode(hash(key), key);</span><br><span class="line">        <span class="keyword">return</span> candidate != <span class="literal">null</span> &amp;&amp; candidate.equals(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Map.Entry) &#123;</span><br><span class="line">            Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;) o;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">key</span> <span class="operator">=</span> e.getKey();</span><br><span class="line">            <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> e.getValue();</span><br><span class="line">            <span class="keyword">return</span> removeNode(hash(key), key, value, <span class="literal">true</span>, <span class="literal">true</span>) != <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> Spliterator&lt;Map.Entry&lt;K,V&gt;&gt; spliterator() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">EntrySpliterator</span>&lt;&gt;(HashMap.<span class="built_in">this</span>, <span class="number">0</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">forEach</span><span class="params">(Consumer&lt;? <span class="built_in">super</span> Map.Entry&lt;K,V&gt;&gt; action)</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab;</span><br><span class="line">        <span class="keyword">if</span> (action == <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">        <span class="keyword">if</span> (size &gt; <span class="number">0</span> &amp;&amp; (tab = table) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mc</span> <span class="operator">=</span> modCount;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; tab.length; ++i) &#123;</span><br><span class="line">                <span class="keyword">for</span> (Node&lt;K,V&gt; e = tab[i]; e != <span class="literal">null</span>; e = e.next)</span><br><span class="line">                    action.accept(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (modCount != mc)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ä¸€ä¸ªé—®é¢˜ï¼ŒEntrySetæ˜¯ç»§æ‰¿è‡ªAbstractSetç±»çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒEntrySetæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªSeté›†åˆï¼Œè€Œå¯¹äºä¸€ä¸ªSeté›†åˆï¼Œæˆ‘ä»¬åº”å½“æ˜ç™½ï¼š</p>
<blockquote>
<p>Setä¸æä¾›Getæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•ç›´æ¥è·å–Setä¸­çš„å…ƒç´  . </p>
<p>å¯¹äºä¸€ä¸ªSeté›†åˆï¼Œæˆ‘ä»¬æƒ³è¦å¯¹ä»–è¿›è¡Œéå†ï¼Œåªæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ol>
<li>ä½¿ç”¨è¿­ä»£å™¨Iteratorè¿›è¡Œè¿­ä»£</li>
<li>ä½¿ç”¨å¢å¼ºforå¾ªç¯</li>
</ol>
<p>è€Œå¢å¼ºforå¾ªç¯ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä½¿ç”¨äº†è¿­ä»£å™¨ã€‚</p>
</blockquote>
<p>ç”±äºEntrySetåªèƒ½è¢«è¿­ä»£å™¨è®¿é—®åˆ°å…¶ä¸­å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å…³æ³¨Iteratoræ–¹æ³•ä¸­è°ƒç”¨çš„<strong>new EntryIterator()</strong>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">EntryIterator</span> <span class="keyword">extends</span> <span class="title class_">HashIterator</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;Map.Entry&lt;K,V&gt;&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> Map.Entry&lt;K,V&gt; <span class="title function_">next</span><span class="params">()</span> &#123; <span class="keyword">return</span> nextNode(); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title function_">nextNode</span><span class="params">()</span> &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] t;</span><br><span class="line">    Node&lt;K,V&gt; e = next;</span><br><span class="line">    <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">    <span class="keyword">if</span> (e == <span class="literal">null</span>)</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchElementException</span>();</span><br><span class="line">    <span class="keyword">if</span> ((next = (current = e).next) == <span class="literal">null</span> &amp;&amp; (t = table) != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">do</span> &#123;&#125; <span class="keyword">while</span> (index &lt; t.length &amp;&amp; (next = t[index++]) == <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> e;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>EntryIteratorè¿­ä»£å™¨çš„next()æ–¹æ³•ï¼Œæ˜¯è·å–HashMapä¸­çš„nextå…ƒç´ ï¼Œæ‰€ä»¥å®é™…ä¸Šåœ¨è¿™é‡Œè¿­ä»£åˆ°çš„ï¼Œæ˜¯HashMapçš„å…ƒç´ ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆEntrySetæ˜¯æœ‰å€¼çš„åŸå› .</p>
<p>â€‹    ä»¥ä¸Šï¼ğŸ™</p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>liuchanglin</span>
                    </p>
                
                
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span><strong>æˆ‘æƒ­æºå®å‰‘ï¼Œåªä¸ºçœ‹å±±æ¥.</strong></span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/Java/"># Java</a>
                    
                        <a href="/tags/Algorithm/"># Algorithm</a>
                    
                        <a href="/tags/DataStructure/"># DataStructure</a>
                    
                        <a href="/tags/HashMap/"># HashMap</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>Â· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2020/09/05/Spring%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E7%9A%84%E4%B8%80%E6%AC%A1%E8%B8%A9%E5%9D%91%E7%BB%8F%E5%8E%86/">Springè‡ªåŠ¨è£…é…çš„ä¸€æ¬¡è¸©å‘ç»å†</a>
            
            
            <a class="next" rel="next" href="/2020/06/07/HashMap%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-%E4%B8%80-%EF%BC%9AHash%E7%AE%97%E6%B3%95/">HashMapçš„å·¥ä½œåŸç†(ä¸€)ï¼šHashç®—æ³•</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>Â© liuchanglin | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
